import type { FastifyInstance } from 'fastify';export default async function r(app:FastifyInstance){app.get('/auth/whoami', async (req, reply)=>{const a=(req as any).auth; if(!a?.userId) return reply.send({authenticated:false}); return reply.send({authenticated:true,user_id:a.userId,email:a.email,memberships:a.memberships||[],tenant_ids:a.tenantIds||[],primary_tenant_id:a.primaryTenantId||null});});}